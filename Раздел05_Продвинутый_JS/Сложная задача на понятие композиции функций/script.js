'use strict';
// –°–ª–æ–∂–Ω–∞—è –∑–∞–¥–∞—á–∞ –Ω–∞ –ø–æ–Ω—è—Ç–∏–µ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π

// –í –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ –µ—Å—Ç—å —Ç–∞–∫–æ–µ –ø–æ–Ω—è—Ç–∏–µ, –∫–∞–∫ –∫–æ–º–ø–æ–∑–∏—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π. –í –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–æ—Ç –ø—Ä–∏–µ–º —Ç–æ–∂–µ –ø–µ—Ä–µ–∫–æ—á–µ–≤–∞–ª –∏ —è–≤–ª—è–µ—Ç—Å—è 
// –≤–µ—Å—å–º–∞ —É–¥–æ–±–Ω—ã–º –≤ —á–∞—Å—Ç–∏ —Å–∏—Ç—É–∞—Ü–∏–π. –ü—Ä–∏–≤–µ–¥—É –Ω–∞–≥–ª—è–¥–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–∑ —ç—Ç–æ–π —Å—Ç–∞—Ç—å–∏. (–ü–æ–∫–∞ –µ—ë –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —Ç–æ–ª—å–∫–æ –≤ –Ω–∞—á–∞–ª–µ, 
// —Ç–∞–∫ –∫–∞–∫ —Ç–∞–º –≤—ã –Ω–∞–π–¥–µ—Ç–µ –Ω–∞—á–∞–ª–æ —Ä–µ—à–µ–Ω–∏—è üôÇ)
// –î–æ–ø—É—Å—Ç–∏–º, —É –≤–∞—Å –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤ –∏—Ç–æ–≥–µ –≤—ã—á–∏—Å–ª—è—é—Ç —Å–∫–∏–¥–∫—É:
const multiply20 = (price) => price * 20;
const divide100 = (price) => price / 100;
const normalizePrice = (price) => price.toFixed(2);
console.log(multiply20(200));     // 4000
console.log(divide100(4000));     // 40
console.log(normalizePrice(40));  // 40.00
// –í –∏—Ç–æ–≥–µ –º—ã –ø–æ–ª—É—á–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–æ —ç—Ç–∞ —Ü–µ–ø–æ—á–∫–∞ –Ω–µ —Å–æ–≤—Å–µ–º —É–¥–æ–±–Ω–∞. –ê –µ—Å–ª–∏ –¥–µ–π—Å—Ç–≤–∏–π —Ç–∞–º –±—É–¥–µ—Ç –º–Ω–æ–≥–æ? –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ—ë –≤–æ—Ç —Ç–∞–∫:
// // result = a(b(c(x)))
// const discount = normalizePrice(divide100(multiply20(200)));
// console.log(discount);    // 40.00
// –ù–æ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π —ç—Ç–æ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –Ω–µ—á–∏—Ç–∞–µ–º—ã–π –∞–¥. –ò –≤–æ—Ç –∑–∞–¥–∞—á–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã –Ω–∞–ø–∏—Å–∞—Ç—å 
// —Ñ—É–Ω–∫—Ü–∏—é compose, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤—Å–µ —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –¥–µ–ª–∞—Ç—å —Ç–æ–∂–µ —Å–∞–º–æ–µ. –¢–æ –µ—Å—Ç—å, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å –∫–æ–º–ø–æ–∑–∏—Ü–∏—é —Ñ—É–Ω–∫—Ü–∏–π. 
// –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø–∏—Å–∏ —Ñ—É–Ω–∫—Ü–∏–π - –ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å–∞–Ω–Ω–∞—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–µ—Ä–≤–æ–π –∏ –¥–∞–ª—å—à–µ —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ. 
// –§—É–Ω–∫—Ü–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ –∏ –æ–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –Ω–∞—á–∞–ª—å–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç. –¢–∞–∫ —á—Ç–æ –≤–∞—Ä–∏–∞–Ω—Ç:
// const compose = (a, b, c) => (x) => a(b(c(x)));
// –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, —Ç–∞–∫ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å 3–º—è —Ñ—É–Ω–∫—Ü–∏—è–º–∏.
// P.S. –î–∞, –≤ —Ä–∞–±–æ—Ç–µ —Ç–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É–∂–µ –≥–æ—Ç–æ–≤—ã –∑–∞ –Ω–∞—Å, –º—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–æ–¥–æ–±–Ω—ã–º–∏ –≤ —á–∞—Å—Ç–∏ –ø–æ React. 
// –ù–æ –∫–∞–∫ –æ–Ω–æ —É—Å—Ç—Ä–æ–µ–Ω–æ –∏–∑–Ω—É—Ç—Ä–∏, –¥–∞ –∏ –≤–æ–æ–±—â–µ —Ç–∞–∫–æ–µ –ø–æ–Ω—è—Ç–∏–µ –ø–æ–ª–µ–∑–Ω–æ –∑–Ω–∞—Ç—å. 

const compose = (...fns) => (x) => fns.reduceRight((res, fn) => fn(res), x);
const discount = compose(normalizePrice, divide100, multiply20);
console.log(discount(200));     // 40.00
// –ú–µ—Ç–æ–¥ reduceRight –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–ª–ª–±—ç–∫ —Ñ—É–Ω–∫—Ü–∏—é —Å previousValue
// –ó–Ω–∞—á–µ–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â—ë–Ω–Ω–æ–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ callback, –ª–∏–±–æ –∑–Ω–∞—á–µ–Ω–∏–µ initialValue, –µ—Å–ª–∏ –æ–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ.
// currentValue - –¢–µ–∫—É—â–∏–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞.
// –ß—Ç–æ –≤ –Ω–∞—à–∏—Ö —Ä–µ–∞–ª–∏—è—Ö –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è res –∏ fn.  –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥–µ–º –∫ fns - –≠—Ç–æ –º–∞—Å—Å–∏–≤ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏.
// –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ res –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω —Ö, —Ç–∞–∫ –∫–∞–∫ –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç —É reduceRight –µ—Å—Ç—å. –¢–æ –µ—Å—Ç—å, —ç—Ç–æ –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, 
// —Ç–æ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –≤ –ø–µ—Ä–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é. fn - —ç—Ç–æ –ø–µ—Ä–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤ –º–∞—Å—Å–∏–≤–µ. –ü–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ
// fn(res) - —ç—Ç–æ –∑–∞–ø—É—Å–∫ –ø–µ—Ä–≤–æ–π –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π (–≤—ã–∑–≤–∞–Ω–Ω–æ–π, —Ç–æ–π —á—Ç–æ —Å–ø—Ä–∞–≤–∞) —Ñ—É–Ω–∫—Ü–∏–∏ —Å –Ω–∞—á–∞–ª—å–Ω—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º. –ê –∫–∞–∂–¥—ã–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ 
// –∑–∞–ø—É—Å–∫–∏ –≤ res –ø–æ–º–µ—â–∞–µ—Ç—Å—è –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

// –£—Å–ª–æ–∂–Ω–µ–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ! –°–ø—Ä–∞–≤–∏–ª–∏—Å—å —Å –ø–µ—Ä–≤–æ–π —á–∞—Å—Ç—å—é? –•–æ—Ä–æ—à–æ, –¥–∞–≤–∞–π—Ç–µ —É—Å–ª–æ–∂–Ω–∏–º üôÇ
// –ê —Ç–µ–ø–µ—Ä—å –Ω–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ composeWithArgs, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –≤ –Ω–∞—á–∞–ª–µ. –ü—Ä–∏–º–µ—Ä:
// const add1 = function(a){return a + 1}
// const addAll3 = function(a,b,c){return a + b + c}
// composeWithArgs(add1,addAll3)(1,2,3)  => –í–µ—Ä–Ω–µ—Ç 7

const composeWithArgs = (...fns) => fns.reduceRight((f, g) => (...args) => g(f(...args)));
const add1 = function(a){return a + 1};
const addAll3 = function(a,b,c){return a + b + c};
console.log(composeWithArgs(add1,addAll3)(1,2,3));     // 7
// –ï—Å–ª–∏ –ø–æ—Å—Ç–∞—Ä–∞—Ç—å—Å—è –æ–±—ä—è—Å–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, —Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ø–µ—Ä–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ "—Å–ø—Ä–∞–≤–∞" –≤–æ—Ç —Ç—É—Ç:
// (...args) => g(f(...args)))
// reduceRight –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏, –∏ –≤–æ—Ç –∫–∞–∫ —Ä–∞–∑ –≤ –ø–µ—Ä–≤—É—é –∏–∑ –Ω–∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–Ω—ã –≤—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, 
// –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–¥–∞–¥—É—Ç—Å—è –≤ composeWithArgs. –í–æ–∑–º–æ–∂–Ω–æ, —Å–∞–º—ã–º –Ω–∞–≥–ª—è–¥–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º –±—É–¥–µ—Ç –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç—É –≤ –¥–µ–±–∞–≥–≥–µ—Ä–µ) 
// –ò–ª–∏ –æ–±–ª–æ–∂–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å.–ª–æ–≥–∞–º–∏




// reduceRight()
// –ú–µ—Ç–æ–¥ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∫ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä—É –∏ –∫–∞–∂–¥–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é –º–∞—Å—Å–∏–≤–∞ (—Å–ø—Ä–∞–≤–∞-–Ω–∞–ª–µ–≤–æ), —Å–≤–æ–¥—è –µ–≥–æ –∫ –æ–¥–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é.
// rest parameters
// –°–∏–Ω—Ç–∞–∫—Å–∏—Å –æ—Å—Ç–∞—Ç–æ—á–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞
// –ï—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–µ–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å ..., –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ 
// –æ—Ç 0 –¥–æ theArgs.length-1 –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –≤ —Ñ—É–Ω–∫—Ü–∏—é.